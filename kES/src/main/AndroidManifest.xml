<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.crowdmobile.kes"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="21" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />


    <uses-permission
        android:name="android.permission.READ_EXTERNAL_STORAGE"/>
    <uses-permission
        android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-feature android:name="android.hardware.camera"
        android:required="true" />
    <uses-permission android:name="com.android.vending.BILLING" />

    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />

    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <!-- This app has permission to register with GCM and receive message -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <permission android:name="com.crowdmobile.kes.permission.UA_DATA" android:protectionLevel="signature" />
    <uses-permission android:name="com.crowdmobile.kes.permission.UA_DATA" />

    <permission
        android:name="com.crowdmobile.kes.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.crowdmobile.kes.permission.C2D_MESSAGE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

    <application
        android:name=".KesApplication"
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <meta-data
            android:name="com.facebook.sdk.ApplicationId"
            android:value="@string/fb_app_id" />

        <activity android:name="net.hockeyapp.android.UpdateActivity" />

        <activity
            android:screenOrientation="portrait"
            android:name="com.crowdmobile.kes.MainActivity"
            android:windowSoftInputMode="adjustResize"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:launchMode="singleTop"
            android:name="com.crowdmobile.kes.AccountActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <data android:scheme="@string/callback_url_scheme" android:host="@string/callback_url_host"/>
            </intent-filter>
        </activity>

        <service android:name="com.kes.NetworkService" />

        <activity
            android:name="com.facebook.LoginActivity"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.Translucent.NoTitleBar">
        </activity>

        <activity
            android:name="com.crowdmobile.kes.PictureActivity"
            android:screenOrientation="portrait"/>


    <!-- REQUIRED for Action.startActivityForResult -->
    <activity android:name="com.urbanairship.actions.ActionActivity" />

    <!-- REQUIRED for Urban Airship Push -->
    <activity android:name="com.urbanairship.CoreActivity" />

    <!-- REQUIRED for Urban Airship Push. The priority is important to be set lower than the
    application's push intent receiver in order for the push intent receiver to handle push intents
    before the core receiver. This allows the application to launch any activities before Urban
    Airship performs any actions or falls back to launching the application launch intent. -->
    <receiver android:name="com.urbanairship.CoreReceiver"
        android:exported="false">

        <intent-filter android:priority="-999">
            <action android:name="com.urbanairship.push.OPENED" />
            <category android:name="com.crowdmobile.kes" />
        </intent-filter>
    </receiver>

    <!-- REQUIRED for Landing Pages
        - For more customization details, see com.urbanairship.actions.LandingPageActivity -->
    <activity
        android:name="com.urbanairship.actions.LandingPageActivity"
        android:exported="false">

        <intent-filter>
            <action android:name="com.urbanairship.actions.SHOW_LANDING_PAGE_INTENT_ACTION" />

            <data android:scheme="http" />
            <data android:scheme="https" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <receiver android:name="com.crowdmobile.kes.receiver.PushReceiver"
        android:exported="false">

        <intent-filter>
            <action android:name="com.urbanairship.push.CHANNEL_UPDATED" />
            <action android:name="com.urbanairship.push.OPENED" />
            <action android:name="com.urbanairship.push.RECEIVED" />
            <action android:name="com.urbanairship.push.DISMISSED" />

            <!-- MODIFICATION REQUIRED - Use your package name as the category -->
            <category android:name="com.crowdmobile.kes" />
        </intent-filter>
    </receiver>

    <!-- REQUIRED for Urban Airship -->
    <service android:name="com.urbanairship.push.PushService" android:label="Push Notification Service" />

    <!-- Required for analytics -->
    <service android:name="com.urbanairship.analytics.EventService" android:label="Event Service" />

    <!-- Required for Actions -->
    <service android:name="com.urbanairship.actions.ActionService" />

    <!-- Required for Rich Push -->
    <service android:name="com.urbanairship.richpush.RichPushUpdateService" />

    <!-- OPTIONAL for Urban Airship Location (for segments support) -->
    <service android:name="com.urbanairship.location.LocationService" android:label="Segments Service" />

    <!-- This is required for persisting preferences related to push and location -->
    <!-- ArbanAirship Required for the library -->
    <provider
        android:name="com.urbanairship.UrbanAirshipProvider"
        android:authorities="com.crowdmobile.kes.urbanairship.provider"
        android:permission="com.crowdmobile.kes.permission.UA_DATA"
        android:exported="true"/>
    </application>

</manifest>
